"use strict";exports.id=907,exports.ids=[907],exports.modules={3300:(a,b,c)=>{function d(a){let b=new URLSearchParams({autoplay:"true",preload:"true",quality:"1080"});return`https://iframe.videodelivery.net/${encodeURIComponent(a)}?${b.toString()}`}function e(a,b){let c=new URLSearchParams({autoplay:"true",muted:"true",loop:"true",controls:"false",preload:"true",quality:"240"});return Number.isFinite(b)&&c.set("startTime",String(Math.max(0,Math.floor(b??0)))),`https://iframe.videodelivery.net/${encodeURIComponent(a)}?${c.toString()}`}function f(a,b,c){let d=`https://videodelivery.net/${encodeURIComponent(a)}/thumbnails/thumbnail.jpg`,e=new URLSearchParams;b&&!Number.isNaN(b)&&e.set("time",`${b}s`),c&&Number.isFinite(c)&&e.set("width",String(Math.max(1,Math.floor(c))));let f=e.toString();return f?`${d}?${f}`:d}c.d(b,{Ky:()=>d,Q$:()=>f,w3:()=>e})},26133:(a,b,c)=>{c.d(b,{U:()=>g});var d=c(48249),e=c(67484),f=c(78502);function g({open:a,onClose:b,defaultName:c,defaultEmail:g,onSignedIn:h}){let i=(0,f.l)(),[j,k]=(0,e.useState)(c??""),[l,m]=(0,e.useState)(g??""),[n,o]=(0,e.useState)("idle"),[p,q]=(0,e.useState)(null);if(!a)return null;async function r(){if(!i)return;let a=l.trim().toLowerCase();if(!a)return;o("sending"),q(null);let b=`${window.location.origin}/auth/callback`,{error:c}=await i.auth.signInWithOtp({email:a,options:{emailRedirectTo:b,data:{name:j.trim()}}});if(c){o("error"),q(c.message);return}o("sent"),q("Lien envoy\xe9. V\xe9rifie tes courriels pour te connecter.")}return(0,d.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 p-6",role:"dialog","aria-modal":"true",children:(0,d.jsxs)("div",{className:"w-full max-w-md rounded-2xl border border-white/10 bg-zinc-950 p-6 shadow-2xl shadow-black/40",children:[(0,d.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-lg font-semibold",children:"Enregistrer tes favoris"}),(0,d.jsx)("p",{className:"mt-1 text-sm text-zinc-400",children:"Entre ton nom et ton courriel, on t’enverra un lien magique."})]}),(0,d.jsx)("button",{className:"rounded-md px-2 py-1 text-sm text-zinc-300 hover:bg-white/10",onClick:b,type:"button",children:"Fermer"})]}),(0,d.jsxs)("div",{className:"mt-4 space-y-3",children:[(0,d.jsxs)("label",{className:"block",children:[(0,d.jsx)("span",{className:"text-sm font-medium text-zinc-200",children:"Nom"}),(0,d.jsx)("input",{className:"mt-1 w-full rounded-xl border border-white/10 bg-white/5 px-3 py-2 text-zinc-100 placeholder:text-zinc-500",value:j,onChange:a=>k(a.target.value),placeholder:"Marie Tremblay",autoComplete:"name"})]}),(0,d.jsxs)("label",{className:"block",children:[(0,d.jsx)("span",{className:"text-sm font-medium text-zinc-200",children:"Courriel"}),(0,d.jsx)("input",{className:"mt-1 w-full rounded-xl border border-white/10 bg-white/5 px-3 py-2 text-zinc-100 placeholder:text-zinc-500",value:l,onChange:a=>m(a.target.value),placeholder:"marie@exemple.com",autoComplete:"email",inputMode:"email"})]}),p?(0,d.jsx)("p",{className:`text-sm ${"error"===n?"text-red-400":"text-zinc-300"}`,children:p}):null,(0,d.jsx)("button",{className:"w-full rounded-xl bg-gradient-to-r from-cyan-500 to-emerald-500 px-4 py-2 text-sm font-semibold text-white disabled:opacity-60",onClick:r,disabled:"sending"===n||!l.trim()||!i,type:"button",children:"sending"===n?"Envoi…":"Envoyer le lien magique"})]})]})})}},27887:(a,b,c)=>{c.d(b,{_:()=>d});function d(){let a=process.env.NEXT_PUBLIC_SUPABASE_URL,b=process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;if(!a)throw Error("Missing env: NEXT_PUBLIC_SUPABASE_URL");if(!b)throw Error("Missing env: NEXT_PUBLIC_SUPABASE_ANON_KEY");return{url:a,anonKey:b}}},42272:(a,b,c)=>{c.d(b,{j:()=>g});var d=c(48249),e=c(2116),f=c.n(e);function g(){return(0,d.jsx)("footer",{className:"border-t border-white/10 bg-zinc-950/60",children:(0,d.jsxs)("div",{className:"mx-auto flex w-full max-w-none items-center justify-between px-4 py-4 text-xs text-zinc-400 lg:px-6",children:[(0,d.jsx)("span",{children:"Approx"}),(0,d.jsx)(f(),{href:"/admin",className:"text-zinc-300 hover:text-white",children:"Admin"})]})})}},56741:(a,b,c)=>{c.d(b,{_:()=>d});function d(){let a=process.env.NEXT_PUBLIC_SUPABASE_URL,b=process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;if(!a)throw Error("Missing env: NEXT_PUBLIC_SUPABASE_URL");if(!b)throw Error("Missing env: NEXT_PUBLIC_SUPABASE_ANON_KEY");return{url:a,anonKey:b}}},75430:(a,b,c)=>{c.d(b,{z:()=>i});var d=c(48249),e=c(2116),f=c.n(e),g=c(3300);let h={type:"Type",objectif:"Objectifs",feel:"Ton",keywords:"Mots cl\xe9s"};function i({video:a,open:b,onClose:c}){if(!b||!a)return null;let e={type:[],objectif:[],keyword:[],style:[],feel:[],parametre:[]};for(let b of a.taxonomies)e[b.kind].push(b);for(let a of Object.keys(e))e[a].sort((a,b)=>a.label.localeCompare(b.label,"fr"));let i=[...e.keyword,...e.style,...e.parametre].sort((a,b)=>a.label.localeCompare(b.label,"fr")),j=[{key:"type",tags:e.type},{key:"objectif",tags:e.objectif},{key:"feel",tags:e.feel},{key:"keywords",tags:i}],k=function(a){if(!Number.isFinite(a))return"—";let b=Math.max(0,Math.floor(a??0)),c=Math.floor(b/3600),d=Math.floor(b%3600/60),e=b%60;return c>0?`${c}:${String(d).padStart(2,"0")}:${String(e).padStart(2,"0")}`:`${d}:${String(e).padStart(2,"0")}`}(a.duration_seconds);return(0,d.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 p-6",role:"dialog","aria-modal":"true",children:(0,d.jsxs)("div",{className:"w-full max-w-6xl overflow-hidden rounded-2xl border border-white/10 bg-black shadow-2xl",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between gap-4 bg-zinc-950 px-4 py-3",children:[(0,d.jsx)("div",{className:"truncate text-sm font-medium text-white",children:a.title}),(0,d.jsx)("button",{className:"rounded-md px-2 py-1 text-sm text-zinc-200 hover:bg-white/10",onClick:c,type:"button",children:"Fermer"})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 gap-4 bg-zinc-950/70 p-4 lg:grid-cols-[minmax(0,2fr)_minmax(0,1fr)]",children:[(0,d.jsx)("div",{className:"aspect-video w-full overflow-hidden rounded-xl border border-white/10 bg-black/40",children:(0,d.jsx)("iframe",{className:"h-full w-full",src:(0,g.Ky)(a.cloudflare_uid),allow:"accelerometer; autoplay; encrypted-media; picture-in-picture;",allowFullScreen:!0,title:a.title})}),(0,d.jsxs)("aside",{className:"flex h-full flex-col gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"text-lg font-semibold text-white",children:a.title}),(0,d.jsxs)("div",{className:"mt-1 text-sm text-zinc-400",children:["Dur\xe9e: ",k]}),(0,d.jsx)("div",{className:"mt-4",children:(0,d.jsx)(f(),{href:`/request?referenceId=${encodeURIComponent(a.id)}`,className:"inline-flex rounded-full bg-gradient-to-r from-cyan-500 to-emerald-500 px-5 py-2 text-xs font-semibold uppercase tracking-[0.18em] text-white transition hover:-translate-y-0.5 hover:shadow-xl hover:shadow-emerald-500/20",children:"Faire une demande de soumission"})})]}),(0,d.jsx)("div",{className:"space-y-3 overflow-y-auto pr-1",children:j.map(a=>(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wide text-zinc-500",children:h[a.key]}),(0,d.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:0===a.tags.length?(0,d.jsx)("span",{className:"text-xs text-zinc-500",children:"—"}):a.tags.map(a=>(0,d.jsx)("span",{className:"rounded-full border border-white/10 bg-white/5 px-2 py-0.5 text-xs text-zinc-200",children:a.label},a.id))})]},a.key))})]})]})]})})}},78502:(a,b,c)=>{c.d(b,{l:()=>g});var d=c(40281),e=c(67484),f=c(56741);function g(){return(0,e.useMemo)(()=>{let{url:a,anonKey:b}=(0,f._)();return(0,d.createBrowserClient)(a,b,{auth:{flowType:"pkce"}})},[])}},79933:(a,b,c)=>{c.d(b,{Cm:()=>h,JE:()=>i});var d=c(94218),e=c(65573),f=c(74968),g=c(27887);function h(){let{url:a,anonKey:b}=(0,g._)();return(0,d.UU)(a,b,{auth:{persistSession:!1},global:{fetch:(a,b)=>fetch(a,{...b,cache:"no-store"})}})}async function i(){let{url:a,anonKey:b}=(0,g._)(),c=await (0,e.UL)();return(0,f.createServerClient)(a,b,{cookies:{getAll:()=>c.getAll(),setAll(a){for(let{name:b,value:d,options:e}of a)c.set(b,d,e)}}})}},81467:(a,b,c)=>{c.d(b,{O:()=>h});var d=c(48249),e=c(67484),f=c(81220),g=c(3300);function h({video:a,onOpen:b,prewarmPreview:c=!1}){let[h,i]=(0,e.useState)(!1),[j,k]=(0,e.useState)(!1),l=a.thumbnail_time_seconds??void 0,m=a.thumbnail_time_seconds??0,n=(0,e.useRef)(null);return(0,d.jsx)("div",{className:"group overflow-hidden rounded-2xl border border-white/10 bg-black/40 motion-safe:animate-[fadeUp_420ms_ease-out]",children:(0,d.jsx)("button",{type:"button",className:"relative block w-full",onClick:()=>b(a),onMouseEnter:()=>{h||(n.current&&clearTimeout(n.current),n.current=setTimeout(()=>{i(!0)},160))},onMouseLeave:()=>{n.current&&clearTimeout(n.current)},children:(0,d.jsxs)("div",{className:"relative aspect-video w-full overflow-hidden",children:[(0,d.jsx)(f.default,{className:`h-full w-full object-cover opacity-95 transition-opacity ${j?"group-hover:opacity-0":"group-hover:opacity-95"}`,src:(0,g.Q$)(a.cloudflare_uid,l),alt:"",width:640,height:360}),h?(0,d.jsx)("iframe",{className:`absolute inset-0 h-full w-full pointer-events-none transition-opacity duration-200 ${j?"opacity-0 group-hover:opacity-100":"opacity-0"}`,src:(0,g.w3)(a.cloudflare_uid,m),allow:"autoplay; fullscreen",loading:"eager",onLoad:()=>{k(!0)},title:a.title}):null,h&&!j?(0,d.jsx)("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center opacity-0 transition-opacity group-hover:opacity-100",children:(0,d.jsx)("span",{className:"block w-[12.5%] shrink-0 aspect-square animate-spin rounded-full bg-[conic-gradient(from_0deg,#34d399,#22d3ee,#3b82f6,#34d399)] [mask:radial-gradient(transparent_60%,#000_61%)]"})}):null,(0,d.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-black/0 to-black/0 opacity-60 transition-opacity group-hover:opacity-90"}),(0,d.jsx)("div",{className:"pointer-events-none absolute inset-x-0 bottom-0 p-3 text-left",children:(0,d.jsx)("div",{className:"translate-y-2 text-sm font-semibold text-white opacity-0 transition-all group-hover:translate-y-0 group-hover:opacity-100",children:a.title})})]})})})}}};